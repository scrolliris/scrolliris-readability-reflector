{"version":3,"names":[],"mappings":"","sources":["scrolliris-readability-reflector-browser.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _index = require('./index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar currentScript = document.currentScript;\n\nvar WidgetProxy = function () {\n  function WidgetProxy(config) {\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, WidgetProxy);\n\n    context.currentScript = currentScript;\n    this._widget = new _index2.default(config, context);\n  }\n\n  _createClass(WidgetProxy, [{\n    key: 'render',\n    value: function render() {\n      return this._widget.render();\n    }\n  }]);\n\n  return WidgetProxy;\n}();\n\nvar ScrollirisReadabilityReflector = {\n  Widget: WidgetProxy\n};\n\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = ScrollirisReadabilityReflector;\n}\n\nwindow.ScrollirisReadabilityReflector = ScrollirisReadabilityReflector;\n\n},{\"./index\":2}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Widget = function () {\n  function Widget(config) {\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Widget);\n\n    this.config = config;\n    this.context = context;\n  }\n\n  _createClass(Widget, [{\n    key: 'render',\n    value: function render() {\n      var ctx = this.context;\n\n      this._insertStyle();\n\n      // iframe\n      var iframe = document.createElement('iframe');\n      iframe.setAttribute('class', 'scrolliris-frame');\n\n      // iframe container\n      var container = document.createElement('div');\n      container.setAttribute('id', 'scrolliris_container');\n      container.appendChild(iframe);\n      document.body.appendChild(container);\n\n      var currentScript = ctx.currentScript || document.currentScript,\n          scriptSrc = currentScript.getAttribute('src') || '';\n      // assumes -canvas.{js|css} are both hosted in same location -browser.js\n      var canvasJS = (ctx.settings || {}).canvasJS || scriptSrc.replace(/-browser(\\.min)?\\.js(\\?)?/, '-canvas$1.js$2').toString(),\n          canvasCSS = (ctx.settings || {}).canvasCSS || scriptSrc.replace(/-browser(\\.min)?\\.js(\\?)?/, '-canvas$1.css$2').toString();\n\n      if (canvasJS === '') {\n        console.error('canvasJS is missing');\n      }\n      if (canvasCSS === '') {\n        console.error('canvasCSS is missing');\n      }\n\n      var content = '\\n<head>\\n  <meta charset=\"utf-8\">\\n  <link rel=\"stylesheet\" href=\"' + canvasCSS + '\">\\n</head>\\n<body>\\n  <div id=\"scrolliris_header\">\\n    <h1>Text Readability Heatmap<span class=\"label\">BETA</span></h1>\\n    <!-- <button class=\"btn close\">close</button> -->\\n  </div>\\n  <div id=\"scrolliris_canvas_container\"></div>\\n  <div id=\"scrolliris_footer\">\\n    <p class=\"txt\">Powered by\\n      <a href=\"https://scrolliris.com/\" target=\"_blank\">Scrolliris</a></p>\\n  </div>\\n  <script src=\"' + canvasJS + '\"></script>\\n</body>\\n';\n      content = content.replace(/\\n/g, '');\n      iframe.contentWindow.ScrollirisReadabilityReflector = {\n        Context: ctx\n      };\n      iframe.contentWindow.document.open();\n      iframe.contentWindow.document.write(content);\n      iframe.contentWindow.document.close();\n    }\n  }, {\n    key: '_insertStyle',\n    value: function _insertStyle() {\n      var cssContent = '\\n#scrolliris_container {\\n  position: fixed;\\n  width: 0px;\\n  height: 0px;\\n  bottom: 0px;\\n  left: 0px;\\n  z-index: 9999999 !important;\\n}\\n\\n#scrolliris_container .scrolliris-frame {\\n  z-index: 9999999 !important;\\n  position: fixed !important;\\n  bottom: 9px;\\n  left: 9px;\\n  width: 260px;\\n  height: 360px;\\n  border: 1px solid rgba(51, 51, 51, 0.18);\\n  border-radius: 1px;\\n}\\n';\n\n      var style = document.createElement('style');\n      style.type = 'text/css';\n      style.appendChild(document.createTextNode(cssContent));\n\n      var h = document.getElementsByTagName('head')[0];\n      h.appendChild(style);\n    }\n  }]);\n\n  return Widget;\n}();\n\nexports.default = Widget;\n\n},{}]},{},[1]);\n"],"file":"scrolliris-readability-reflector-browser.js"}