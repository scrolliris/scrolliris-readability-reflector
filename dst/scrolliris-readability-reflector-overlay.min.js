!function e(t,n,r){function o(a,l){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e,t){var n=parseInt(e.slice(1),16),r=t<0?0:255,o=t<0?-1*t:t,i=n>>16,a=n>>8&255,l=255&n;return"#"+(16777216+65536*(Math.round((r-i)*o)+i)+256*(Math.round((r-a)*o)+a)+(Math.round((r-l)*o)+l)).toString(16).slice(1)}Object.defineProperty(n,"__esModule",{value:!0}),n.collectElements=function(e,t){var n="";return[["heading","h1,h2,h3,h4,h5,h6"],["paragraph","p"],["material","ul,ol,pre,table,blockquote"]].forEach(function(e){var r=e[0];n+=","+(t[r]||e[1])}),e.querySelectorAll(n.slice(1))},n.getStyle=function(e,t){var n=void 0;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n},n.fetchResultData=function(e,t,n,r){var o={csrfToken:t};o.csrfToken||(o.csrfToken="");return function(e){var t={p:[]};return new Promise(function(n,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),""!==o.csrfToken&&i.setRequestHeader("X-CSRF-Token",o.csrfToken),i.responseType="text",i.onerror=function(){i.status,r(t)},i.onload=function(){var e=i.status,o=i.response;200===e?(o=o.replace(/^\]\)\}while\(1\);<\/x>/,""),n(JSON.parse(o))):(console.error("[ERROR] GET status: ",e),r(t))},i.send()})}(e).then(function(e){return n(e)},function(e){return r(e)})},n.buildHTML=function(e,t){var n="<html><head>";n+="\n<style>\n</style>\n",n+="</head><body>";var o=["#2d96db","#4aa8a6","#64b977","#99c95d","#c5d062","#f6d866","#fab252","#fd8e3e","#fe6f43","#fd515b","#fb1b2a"],i=0;return n+=Array.from(t).map(function(t){var n=document.importNode(t,!0);if("IMG"!==n.nodeName&&"P"===n.nodeName&&"p"in e){var a=e.p[String(i)];if(void 0!==a){var l="#ffffff";try{var s=Math.round(10*parseFloat(a));l=r(o[s],.55)}catch(e){console.error(e)}n.style.background=l,n.style.backgroundColor="rgba("+l+", 0.9)"}i+=1}return n.outerHTML}).join(""),n+="</body></html>"}},{}],2:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./_util");!function(e,t){var n=e.parent.document.getElementById("scrolliris_frame"),r=t.getElementById("scrolliris_item_container"),o={y:0,x:0},i=function(e,t){r.classList.contains("hidden")?(n.style.top="",n.style.left="",n.style.bottom="0"):(n.style.top=o.y-e+"px",n.style.left=o.x-t+"px")};new MutationObserver(function(t){if(!(t.length>1)){var n=t[0];"attributes"===n.type&&"class"===n.attributeName&&i(e.parent.pageYOffset,e.parent.pageXOffset)}}).observe(r,{attributes:!0}),e.parent.document.addEventListener("scroll",function(e){if("path"in e){if(2!==e.path.length)return;var t=e.path[1];i(t.pageYOffset,e.pageXOffset)}else i(e.pageY,e.pageX)})}(window,document),function(e,t,n){var i={},a={};if(n.hasOwnProperty("config")&&"object"===r(n.config)&&n.config,n.hasOwnProperty("settings")&&"object"===r(n.options)&&!(i=n.settings).endpointURL)return console.error("endpointURL is required"),!1;n.hasOwnProperty("options")&&"object"===r(n.options)&&(a=n.options);var l=a.selectors||{},s=e.parent.document.querySelector(l.article||"body article"),u=(0,o.collectElements)(s,l),c=function(e){var n={x:window.parent.pageXOffset,y:window.parent.pageYOffset},r=(0,o.buildHTML)(e,Array.from(u).map(function(e){var r=e.getBoundingClientRect(),i=t.importNode(e,!0);return i?(i.style.padding="0",i.style.margin="0",i.style.fontFamily=(0,o.getStyle)(e,"font-family"),i.style.fontSize=(0,o.getStyle)(e,"font-size"),i.style.lineHeight=(0,o.getStyle)(e,"line-height"),i.style.letterSpacing=(0,o.getStyle)(e,"letter-spacing"),i.style.position="absolute",i.style.top=r.top+n.y+"px",i.style.left=r.left+n.x+"px",i.style.right=r.right+"px",i.style.width=r.width+"px",i.style.height=r.height+"px",i.style.color="transparent",i):e}));t.getElementById("scrolliris_overlay_container").innerHTML=r};(0,o.fetchResultData)(i.endpointURL,i.csrfToken,function(e){c(e)},function(e){c(e)})}(window,document,(window.ScrollirisReadabilityReflector||{}).Context)},{"./_util":1}]},{},[2]);
//# sourceMappingURL=scrolliris-readability-reflector-overlay.min.js.map
