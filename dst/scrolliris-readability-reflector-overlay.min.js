!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n||e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e,t){var n=parseInt(e.slice(1),16),r=t<0?0:255,o=t<0?-1*t:t,i=n>>16,a=n>>8&255,s=255&n;return"#"+(16777216+65536*(Math.round((r-i)*o)+i)+256*(Math.round((r-a)*o)+a)+(Math.round((r-s)*o)+s)).toString(16).slice(1)}Object.defineProperty(n,"__esModule",{value:!0}),n.collectElements=function(e,t){var n="";return[["heading","h1,h2,h3,h4,h5,h6"],["paragraph","p"],["material","ul,ol,pre,table,blockquote"]].forEach(function(e){var r=e[0];n+=","+(t[r]||e[1])}),e.querySelectorAll(n.slice(1))},n.getStyle=function(e,t){var n=void 0;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n},n.fetchResultData=function(e,t,n,r){var o={csrfToken:t};o.csrfToken||(o.csrfToken="");return function(e){var t={p:[]};return new Promise(function(n,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.setRequestHeader("Accept","application/json"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),""!==o.csrfToken&&i.setRequestHeader("X-CSRF-Token",o.csrfToken),i.responseType="text",i.onerror=function(){i.status,r(t)},i.onload=function(){var e=i.status,o=i.response;200===e?(o=o.replace(/^\]\)\}while\(1\);<\/x>/,""),n(JSON.parse(o))):(console.error("[ERROR] GET status: ",e),r(t))},i.send()})}(e).then(function(e){return n(e)},function(e){return r(e)})},n.buildHTML=function(e,t){var n="<html><head>";n+="\n<style>\n</style>\n",n+="</head><body>";var o=["#2d96db","#4aa8a6","#64b977","#99c95d","#c5d062","#f6d866","#fab252","#fd8e3e","#fe6f43","#fd515b","#fb1b2a"],i=0;return n+=Array.from(t).map(function(t){var n=document.importNode(t,!0);if("IMG"!==n.nodeName&&"P"===n.nodeName&&"p"in e){var a=e.p[String(i)];if(void 0!==a){var s="#ffffff";try{var c=Math.round(10*parseFloat(a));s=r(o[c],.55)}catch(e){console.error(e)}n.style.background=s,n.style.backgroundColor="rgba("+s+", 0.9)"}i+=1}return n.outerHTML}).join(""),n+="</body></html>"},n.hideLoader=function(e,t,n){var r=void 0,o=function(e){return function(){setTimeout(function(){var t=e.getElementById("loader"),n=e.getElementById("scrolliris_icon_container");t.classList.add("hidden"),n.classList.remove("hidden")},n)}}(e);e.addEventListener?(r=function(e,t,n){return function(){t.removeEventListener("DOMContentLoaded",e,!1),n()}}(r,e,o),e.addEventListener("DOMContentLoaded",r,!1)):e.attachEvent?(r=function(e,t,n){return function(){"complete"===t.readyState&&(t.detachEvent("onreadystatechange",e),n())}}(r,e,o),e.attachEvent("onreadystatechange",r)):t.onload=o}},{}],2:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./_util");!function(e,t,n){!function(e){var t=Promise.resolve();e.forEach(function(e){t=t.then(function(){return e()})})}([function(){var n=t.getElementById("scrolliris_item_container"),r={y:0,x:0},o=function(e,t){n.classList.contains("hidden")?(n.style.top="",n.style.left="",n.style.bottom="0"):(n.style.top=r.y-e+"px",n.style.left=r.x-t+"px")};o(e.parent.pageYOffset,e.parent.pageXOffset);new MutationObserver(function(t){var n=t.filter(function(e){return"class"===e.attributeName});if(1===n.length){var r=n[0];"attributes"===r.type&&"class"===r.attributeName&&o(e.parent.pageYOffset,e.parent.pageXOffset)}}).observe(n,{attributes:!0}),e.parent.document.addEventListener("scroll",function(e){if("path"in e){if(2!==e.path.length)return;var t=e.path[1];o(t.pageYOffset,e.pageXOffset)}else o(e.pageY,e.pageX)})},function(){var i={},a={};if(n.hasOwnProperty("config")&&"object"===r(n.config)&&n.config,n.hasOwnProperty("settings")&&"object"===r(n.options)&&!(i=n.settings).endpointURL)return console.error("endpointURL is required"),!1;n.hasOwnProperty("options")&&"object"===r(n.options)&&(a=n.options);var s=a.selectors||{},c=e.parent.document.querySelector(s.article||"body article"),l=(0,o.collectElements)(c,s),u=function(n){var r={x:e.parent.pageXOffset,y:e.parent.pageYOffset},i=(0,o.buildHTML)(n,Array.from(l).map(function(e){var n=e.getBoundingClientRect(),i=t.importNode(e,!0);return i?(i.style.padding="0",i.style.margin="0",i.style.fontFamily=(0,o.getStyle)(e,"font-family"),i.style.fontSize=(0,o.getStyle)(e,"font-size"),i.style.lineHeight=(0,o.getStyle)(e,"line-height"),i.style.letterSpacing=(0,o.getStyle)(e,"letter-spacing"),i.style.position="absolute",i.style.top=n.top+r.y+"px",i.style.left=n.left+r.x+"px",i.style.right=n.right+"px",i.style.width=n.width+"px",i.style.height=n.height+"px",i.style.color="transparent",i):e}));t.getElementById("scrolliris_overlay_container").innerHTML=i};(0,o.fetchResultData)(i.endpointURL,i.csrfToken,function(e){u(e)},function(e){u(e)})},function(){return(0,o.hideLoader)(t,e,1800)}])}(window,document,(window.ScrollirisReadabilityReflector||{}).Context)},{"./_util":1}]},{},[2]);
//# sourceMappingURL=scrolliris-readability-reflector-overlay.min.js.map
