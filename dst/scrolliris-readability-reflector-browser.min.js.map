{"version":3,"sources":["scrolliris-readability-reflector-browser.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_index2","obj","__esModule","default","_interopRequireDefault","currentScript","document","ScrollirisReadabilityReflector","Widget","WidgetProxy","config","context","arguments","undefined","this","_widget","value","render","window","./index","2","ctx","_insertStyle","iframe","createElement","setAttribute","container","appendChild","body","scriptSrc","getAttribute","reflectorJSRegex","canvasJS","settings","replace","toString","canvasCSS","console","error","content","contentWindow","Context","open","write","close","style","type","createTextNode","getElementsByTagName"],"mappings":"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","file":"scrolliris-readability-reflector-browser.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _index = require('./index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar currentScript = document.currentScript;\n\nvar WidgetProxy = function () {\n  function WidgetProxy(config) {\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, WidgetProxy);\n\n    context.currentScript = currentScript;\n    this._widget = new _index2.default(config, context);\n  }\n\n  _createClass(WidgetProxy, [{\n    key: 'render',\n    value: function render() {\n      return this._widget.render();\n    }\n  }]);\n\n  return WidgetProxy;\n}();\n\nvar ScrollirisReadabilityReflector = {\n  Widget: WidgetProxy\n};\n\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = ScrollirisReadabilityReflector;\n}\n\nwindow.ScrollirisReadabilityReflector = ScrollirisReadabilityReflector;\n\n},{\"./index\":2}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Widget = function () {\n  function Widget(config) {\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Widget);\n\n    this.config = config;\n    this.context = context;\n  }\n\n  _createClass(Widget, [{\n    key: 'render',\n    value: function render() {\n      var ctx = this.context;\n\n      this._insertStyle();\n\n      // iframe\n      var iframe = document.createElement('iframe');\n      iframe.setAttribute('class', 'scrolliris-frame');\n\n      // iframe container\n      var container = document.createElement('div');\n      container.setAttribute('id', 'scrolliris_container');\n      container.appendChild(iframe);\n      document.body.appendChild(container);\n\n      var currentScript = ctx.currentScript || document.currentScript,\n          scriptSrc = currentScript.getAttribute('src') || '';\n      // This part assumes -canvas.{js|css} are both hosted in same location\n      // as -browser.js.\n      //\n      // reflector.js         --> reflector-canvas.js,.css\n      // reflector-browser.js --> reflector-canvas.js,.css\n      var reflectorJSRegex = /(-browser)?(\\.min)?\\.js(\\?)?/;\n      var canvasJS = (ctx.settings || {}).canvasJS || scriptSrc.replace(reflectorJSRegex, '-canvas$2.js$3').toString(),\n          canvasCSS = (ctx.settings || {}).canvasCSS || scriptSrc.replace(reflectorJSRegex, '-canvas$2.css$3').toString();\n\n      if (canvasJS === '') {\n        console.error('canvasJS is missing');\n      }\n      if (canvasCSS === '') {\n        console.error('canvasCSS is missing');\n      }\n\n      var content = '\\n<head>\\n  <meta charset=\"utf-8\">\\n  <link rel=\"stylesheet\" href=\"' + canvasCSS + '\">\\n</head>\\n<body>\\n  <div id=\"scrolliris_header\">\\n    <h1>Text Readability Heatmap<span class=\"label\">BETA</span></h1>\\n    <!-- <button class=\"btn close\">close</button> -->\\n  </div>\\n  <div id=\"scrolliris_canvas_container\"></div>\\n  <div id=\"scrolliris_footer\">\\n    <p class=\"txt\">Powered by\\n      <a href=\"https://scrolliris.com/\" target=\"_blank\">Scrolliris</a></p>\\n  </div>\\n  <script src=\"' + canvasJS + '\"></script>\\n</body>\\n';\n      content = content.replace(/\\n/g, '');\n      iframe.contentWindow.ScrollirisReadabilityReflector = {\n        Context: ctx\n      };\n      iframe.contentWindow.document.open();\n      iframe.contentWindow.document.write(content);\n      iframe.contentWindow.document.close();\n    }\n  }, {\n    key: '_insertStyle',\n    value: function _insertStyle() {\n      var cssContent = '\\n#scrolliris_container {\\n  position: fixed;\\n  width: 0px;\\n  height: 0px;\\n  bottom: 0px;\\n  left: 0px;\\n  z-index: 9999999 !important;\\n}\\n\\n#scrolliris_container .scrolliris-frame {\\n  z-index: 9999999 !important;\\n  position: fixed !important;\\n  bottom: 9px;\\n  left: 9px;\\n  width: 260px;\\n  height: 360px;\\n  border: 1px solid rgba(51, 51, 51, 0.18);\\n  border-radius: 1px;\\n}\\n';\n\n      var style = document.createElement('style');\n      style.type = 'text/css';\n      style.appendChild(document.createTextNode(cssContent));\n\n      var h = document.getElementsByTagName('head')[0];\n      h.appendChild(style);\n    }\n  }]);\n\n  return Widget;\n}();\n\nexports.default = Widget;\n\n},{}]},{},[1]);\n"]}