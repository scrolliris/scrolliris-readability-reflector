{"version":3,"sources":["scrolliris-readability-reflector.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","Widget","config","context","arguments","undefined","this","ctx","_insertStyle","iframe","document","createElement","setAttribute","container","appendChild","body","currentScript","scriptSrc","getAttribute","reflectorJSRegex","canvasJS","settings","replace","toString","canvasCSS","console","error","content","contentWindow","ScrollirisReadabilityReflector","Context","open","write","close","cssContent","style","type","createTextNode","h","getElementsByTagName","default"],"mappings":"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","file":"scrolliris-readability-reflector.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Widget = function () {\n  function Widget(config) {\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Widget);\n\n    this.config = config;\n    this.context = context;\n  }\n\n  _createClass(Widget, [{\n    key: 'render',\n    value: function render() {\n      var ctx = this.context;\n\n      this._insertStyle();\n\n      // iframe\n      var iframe = document.createElement('iframe');\n      iframe.setAttribute('class', 'scrolliris-frame');\n\n      // iframe container\n      var container = document.createElement('div');\n      container.setAttribute('id', 'scrolliris_container');\n      container.appendChild(iframe);\n      document.body.appendChild(container);\n\n      var currentScript = ctx.currentScript || document.currentScript,\n          scriptSrc = currentScript.getAttribute('src') || '';\n      // This part assumes -canvas.{js|css} are both hosted in same location\n      // as -browser.js.\n      //\n      // reflector.js         --> reflector-canvas.js,.css\n      // reflector-browser.js --> reflector-canvas.js,.css\n      var reflectorJSRegex = /(-browser)?(\\.min)?\\.js(\\?)?/;\n      var canvasJS = (ctx.settings || {}).canvasJS || scriptSrc.replace(reflectorJSRegex, '-canvas$2.js$3').toString(),\n          canvasCSS = (ctx.settings || {}).canvasCSS || scriptSrc.replace(reflectorJSRegex, '-canvas$2.css$3').toString();\n\n      if (canvasJS === '') {\n        console.error('canvasJS is missing');\n      }\n      if (canvasCSS === '') {\n        console.error('canvasCSS is missing');\n      }\n\n      var content = '\\n<head>\\n  <meta charset=\"utf-8\">\\n  <link rel=\"stylesheet\" href=\"' + canvasCSS + '\">\\n</head>\\n<body>\\n  <div id=\"scrolliris_header\">\\n    <h1>Text Readability Heatmap<span class=\"label\">BETA</span></h1>\\n    <!-- <button class=\"btn close\">close</button> -->\\n  </div>\\n  <div id=\"scrolliris_canvas_container\"></div>\\n  <div id=\"scrolliris_footer\">\\n    <p class=\"txt\">Powered by\\n      <a href=\"https://scrolliris.com/\" target=\"_blank\">Scrolliris</a></p>\\n  </div>\\n  <script src=\"' + canvasJS + '\"></script>\\n</body>\\n';\n      content = content.replace(/\\n/g, '');\n      iframe.contentWindow.ScrollirisReadabilityReflector = {\n        Context: ctx\n      };\n      iframe.contentWindow.document.open();\n      iframe.contentWindow.document.write(content);\n      iframe.contentWindow.document.close();\n    }\n  }, {\n    key: '_insertStyle',\n    value: function _insertStyle() {\n      var cssContent = '\\n#scrolliris_container {\\n  position: fixed;\\n  width: 0px;\\n  height: 0px;\\n  bottom: 0px;\\n  left: 0px;\\n  z-index: 9999999 !important;\\n}\\n\\n#scrolliris_container .scrolliris-frame {\\n  z-index: 9999999 !important;\\n  position: fixed !important;\\n  bottom: 9px;\\n  left: 9px;\\n  width: 260px;\\n  height: 360px;\\n  border: 1px solid rgba(51, 51, 51, 0.18);\\n  border-radius: 1px;\\n}\\n';\n\n      var style = document.createElement('style');\n      style.type = 'text/css';\n      style.appendChild(document.createTextNode(cssContent));\n\n      var h = document.getElementsByTagName('head')[0];\n      h.appendChild(style);\n    }\n  }]);\n\n  return Widget;\n}();\n\nexports.default = Widget;\n\n},{}]},{},[1]);\n"]}